---
title: "The Kids Theming"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{The Kids Theming}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.align = "center",
  fig.width = 6
)
```

# Overview

Using functions that automatically apply a set of formatting options to plots and tables saves time, allowing us to focus on the analysis and interpretation. Code will also look much cleaner when those ~10 repeated lines of ggplot for each plot are automated away. Importantly, these functions also ensure a polished and consistent appearance across our team, so that outputs look the same irrespective of who generated it.

```{r echo=TRUE, message=FALSE, warning=FALSE}
library(thekidsbiostats)
```

All theming functions host a variety of other options that can further tweak the overall look of plots and tables (including colours).

## The Kids Colours
Colours, consistent with "The Kids" brand guidelines, can be accessed directly via `thekidsbiostats::thekids_colours`:

```{r echo=F, message=F}
thekidsbiostats::thekids_colours

bind_rows(thekids_palettes, .id = "Category") %>%
  filter(Category != "typography") %>% 
  pivot_longer(-Category, names_to = "Color", values_to = "Hex") %>%
  drop_na() %>%  # Remove NA rows
  mutate(
    Category = factor(Category, levels = c("primary", "tint50", "tint10")),
    Color = factor(Color, levels = rev(names(thekids_palettes$primary))) # Maintain row order
  ) %>% 
  ggplot(aes(x = Category, y = Color, fill = Hex)) +
  geom_tile(width = 0.45, height = 0.9) +  # Reduce width more than height to increase horizontal spacing
  labs(x = NULL, y = NULL, title = "The Kids Palette") +
  thekids_theme(base_size = 14) +
  scale_fill_identity() +  # Use exact hex colors
  scale_x_discrete(position = "top") +
  theme(
    axis.text.x = element_text(face = "bold"),  # Bold column headers
    axis.text.y = element_text(face = "bold"),  # Bold row labels
    panel.grid = element_blank(),  # Remove grid lines
    axis.ticks = element_blank(),  # Remove axis ticks
    legend.position = "none"
  ) +
  coord_fixed(ratio = 0.5)  # Increase ratio to add more horizontal space
```
<br><br>

# Example Usage

## `> thekids_theme`

The `thekids_theme` function applies consistent theming to ggplot2 visualisations. It uses a clean, minimal aesthetic with fonts and colours that align with "The Kids" branding. Hereâ€™s an example of a plot before-and-after theming:

```{r echo=TRUE}
ggplot(mtcars, 
       aes(x = mpg, y = wt, col = factor(cyl))) +
  geom_point(size = 3) +
  labs(x = "Miles per Gallon", y = "Weight", col = "Cylinders")
```

```{r}
ggplot(mtcars, 
       aes(x = mpg, y = wt, col = factor(cyl))) +
  geom_point(size = 3) +
  labs(x = "Miles per Gallon", y = "Weight", col = "Cylinders") +
  thekids_theme()
```
<br>
Miles better! And as simple as just adding one line of code: `thekids_theme()`.

## `> thekids_table`

`thekids_table` produces tables styled with The Kids branding and is powered by the [flextable](https://cran.r-project.org/web/packages/flextable/index.html) package. By default, this function applies the Barlow font, compact formatting (our preference!), and zebra-striping for readability. Note that these can all be altered/disabled via parameters (see `?thekids_table` documentation).

For example, a raw table output from the mtcars dataset looks like this:

```{r echo=TRUE}
head(mtcars, 5)
```

Now, applying `thekids_table` transforms it into a clean, visually appealing format with branded elements:

```{r echo=TRUE}
head(mtcars, 5) %>%
  thekids_table(colour = "Saffron", font.size = 10)
```

This outputs a compact, zebra-striped table ready to be added to any Word or HTML reports.

The `padding` and `striped` options can be changed if we would prefer more space and to lose the stripes:

```{r echo=TRUE}
head(mtcars, 5) %>%
  thekids_table(colour = "Saffron", 
                font.size = 10, 
                padding = 4, 
                striped = F)
```

